<?xml version="1.0" ?>
<launch>

  <arg name="serial_no"		default=""/>
  <arg name="camera_name"	default="a_bot_camera"/>
  <arg name="config_dir"	default="$(dirname)/../config"/>
  <arg name="manager"		default="camera_manager"/>
  <arg name="nthreads"		default="4"/>

  <node if="$(eval manager != '')"
	name="$(arg manager)" pkg ="nodelet" type="nodelet"
	args="manager" output="screen">
    <param name="num_worker_threads"	value="$(arg nthreads)"/>
  </node>

  <include file="$(find realsense2_camera
		 )/launch/rs_camera_with_config.launch">
    <arg name="camera"			value="$(arg camera_name)"/>
    <arg name="config_file"		value="$(arg config_dir
					       )/$(arg camera_name).yaml"/>
    <arg name="external_manager"	value="$(eval manager != '')"/>
      <arg name="manager"		value="/$(arg manager)"
	   if="$(eval manager != '')"/>
  </include>

  <include file="$(dirname)/run.launch">
    <arg name="image_topic"	value="$(arg camera_name)/color/image_raw"/>
    <arg name="manager"		value="$(arg manager)"/>
  </include>

  <node name="$(anon rviz)" pkg="rviz" type="rviz" output="screen"
	args="-d $(find aist_visual_tracker)/launch/realsense.rviz"/>

  <node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure"/>

</launch>
